
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  </head>

  <body role="document">
    
    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>
      
      <div class="well" style="width:800px; margin: 0 auto">

	<p> In this experiment, we'll be playing a communication
	game. The game has two roles, which will be assigned
	randomly. Since you will not know which role you will play
	until the game starts, you will be responsible for
	understanding the responsibilities and goals of both
	roles.  </p>

	  <p> If you are the first person to arrive in a game, you must wait
	shortly for another player to join. Once both players have
	joined the game, you will see a display like the
	following: </p>

	<p>
	  <center><img src="images/overall_view.jpg" alt="Example gameplay" style="width:600px;height:320px"></center>
	</p>

	<p> On the right side of the screen, labeled "Play-space", you
	will see a grid filled with various objects. On the left side
	of the screen, labeled "Chatbox", you will see a chat window
	that you can use to communicate with the other player. </p>
	
	<h3> Director instructions </h3>

	<p> If you are the "director", the grid will be marked to
	indicate how the objects inside are to be moved.  You'll have
	to give instructions to the other player telling them how to
	move the objects. You are responsible for instructing to move
	the items so that they reach the final positions that are
	shown in the picture. Be sure to give your instructions as
	clearly as you possibly can. Given the below screen, for
	example, you would want your partner to move the
	umbrella to the right. </p>

	<p>
	  <center><img src="images/director_view.jpg" alt="director view" style="width:300px;height:320px"></center>
	</p>

	<h3> Matcher instructions </h3>

	<p> If you are the "matcher", your job will be to follow the
	director's instructions as best as you can. You will follow
	these instructions by clicking and dragging items from one
	cell of the grid to another. To understand your behavior, we
	will be recording the location of your mouse within the
	grid. For this reason, we will ask you to click on a circle in
	the center of the grid at the beginning of the game, between
	instructions, or if you make an incorrect move. This screen
	will look like the following: </p>

	<p>
	  <center><img src="images/clickInTheCircle.jpg" alt="director view" style="width:600px;height:290px"></center>
	</p>	

	<h3> Hidden objects </h3>

	<p> An important point for both players to keep in mind is
	that <strong> some cells are hidden to the director </strong>. When the
	background of a cell is black, <strong> the director will not
	know what is behind it, if anything </strong>. If you are the matcher, you
	must pay close attention to the fact that the director will
	not be able to see the items in the occluded slots. To illustrate, here are the 2 views side-by-side: </p>

	<p>
	    <center>
	      <img src="images/director_view.jpg" alt="director view" style="width:300px;height:320px"> 
	      <img src="images/matcher_view.jpg" alt="matcher view" style="width:300px;height:320px">
	    </center>
	</p>

	<p> Before we start, there are a few more things we'd like you to
	keep in mind. </p>
	  
	<ol>
	  <li> During each round, please talk only about the game. Try
	    not to talk about the objects except as needed to move
	    them around the grid. We will be recording the messages
	    you send for research purposes. </li>
	  <li> There will be 8 different grids with totally different
	  items in different locations. There will be four
	  instructions per grid. Once another player joins, the
	  experiment should take about 7 minutes.</li>
	  <li> Note that if you refresh the page, or close the tab
	  containing the game, you will not be able to complete the
	  HIT. We will warn you before you navigate away, so it
	  shouldn't happen by accident!</li>
	</ol>
	
      </div>
      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">
	</br>
	The director's goal in this game is to
	  </br>
	  <input type="radio" name="dgoal" value="yes"> Communicate instructions clearly
	  </br>
	  <input type="radio" name="dgoal" value="no"> Move objects to the correct locations
	  </br>


	</br>
	The matcher's goal in this game is to 
      </br>
      <input type="radio" name="mgoal" value="no"> Communicate instructions clearly
      </br>
      <input type="radio" name="mgoal" value="yes"> Move objects to the correct locations
      </br>

      
      </br>
	If a square in the grid is black, it means
	  </br>
	  <input type="radio" name="occ" value="no"> The matcher <strong> cannot </strong> see the object behind it
	  </br>
	  <input type="radio" name="occ" value="yes"> The director <strong> cannot </strong> see the object behind it
	  </br>
	    <input type="radio" name="occ" value="no"> The director <strong> can </strong> see the object behind it
	  </br>
	  

      </br> To move an object, the matcher must
      </br>
	<input type="radio" name="move" value="yes"> Click and drag it
	  </br>
	    <input type="radio" name="move" value="no"> Use their keyboard to select the destination
       </br>

       </br> 
       At the end of a round
       </br>
       <input type="radio" name="comp" value="no"> Some objects stay the same
       </br>
       <input type="radio" name="comp" value="yes"> All of the objects are replaced by new objects in new locations
       </br>
	  
          </br>
	  Have you participated in this study before? </br>
	  <input type="radio" name="completed" value="yes"> No
          </br>
	  <input type="radio" name="completed" value="no"> Yes
          </br>

	  </br>
	  <input id="quiz_submit" type="submit" value="Submit"> 
		  </br>
		  </br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);
      
      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="comp"]:checked').val();
        var ans2 = $('input[name="move"]:checked').val();
        var ans3 = $('input[name="mgoal"]:checked').val();
        var ans4 = $('input[name="dgoal"]:checked').val();
        var ans5 = $('input[name="occ"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();
        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" && 
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>
    
    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../dist/js/bootstrap.min.js"></script>
  </body>
</html>
